PicoScenes MATLAB Toolbox
===================================

PicoScenes MATLAB Toolbox enables MATLAB to parse the '.csi' file generated by PicoScenes.

System Requirement
------------------------------
#. PicoScenes MATLAB Toolbox currently supports three OSes:

  #. Ubuntu 20.04 or its variants, such as Linux Mint 20;
  #. macOS 11.0 Big Sur or above;
  #. Windows 10;

#. MATLAB R2020b or later

#. A C++20 compatible compiler

  + On Ubuntu platform, if you are not sure about this, try run sudo apt install build-essential in Terminal. It will install the default GCC compiler.
  + On macOS, install Xcode 12
  + On windows, install MinGW. It is best to install the latest version of MinGW because some older versions do not support C++20.

Installation
-------------------

  #. Open MATLAB
  #. Change MATLAB 'Current Folder' to current directory
  #. run install_PicoScenes_MATLAB_Toolbox in Command Window
    
      + if everything goes fine, a message should pop saying that PicoScenes MATLAB Toolbox is successfully installed.

  #. Restart MATLAB

Usage
-------------------
To parse a .csi file, you have three options:

    #. Double-click .csi file in MATLAB Current Folder;
    #. Drag'n'Drop one or multiple .csi files into MATLAB Command Window;
    #. Open BatchLoader.fig, a MATLAB-based .csi file batch loader, click 'Select .csi Files' and choose .csi files.

After parsing, you can see a bundle with the same name as the .csi file in the MATLAB workspace.

Data structure member
----------------------

The members and their description in a .csi file are as follows

.. csv-table:: Variable and its description in a packet
    :header: "Variable", "Description", "Value type"
    :widths: 20, 40, 20

    `header`_, "The header", "struct"
    `basic`_, "The basic information", "struct"
    `rxExtraInfo`_, "complex doublecomplex doublecomplex doublecomplex doublecomplex doublecomplex doublecomplex doublecomplex double", "struct"
    `txExtraInfo`_, "", "struct"
    `channel`_, "", "struct"
    "csi", "CSI data", "complex double"
    "mag", "Magnitude parsed from CSI", "double"
    "phase", "Phase parsed from CSI", "double"
    "subcarrierIndex", "Index for each subcarrier", "int16"
    `baseband`_, "", "struct"
    "bundleName", "Bundle's name, as same as .csi file name", "string"


header
>>>>>>

.. csv-table:: Variable and their Description
    :header: "Variable", "Description", "Value type"
    :widths: 20, 40, 20

    "Addr1", "", "uint8"
    "Addr2", "", "uint8"
    "Addr3", "", "uint8"
    "Fragment", "", "uint16"
    "Sequence", "", "uint16"
    "DeviceType", "", "uint16"
    "FrameType", "", "uint8"
    "TaskId", "", "uint16"
    "TxId", "", "uint16"

basic
>>>>>>

.. csv-table:: Variable and their meanings
    :header: "Variable", "Description", "Value type"
    :widths: 20, 40, 20

    "deviceType", "", "uint16"
    "timestamp", "", "uint64"
    "channelFreq", "", "uint16"
    "packetFormat", "", "int8"
    "CBW", "", "uint16"
    "GI", "", "uint16"
    "MCS", "", "uint8"
    "numSTS", "", "uint8"
    "numESS", "", "uint8"
    "numRx", "", "uint8"
    "noiseFloor", "", "int8"
    "rssi", "", "uint8"
    "rssi1", "", "uint8"
    "rssi2", "", "uint8"
    "rssi3", "", "uint8"

rxExtraInfo
>>>>>>>>>>>>>

.. csv-table:: Variable and their meanings
    :header: "Variable", "Description", "Value type"
    :widths: 20, 40, 20

    "version", "", "uint64"
    "txchansel", "", "uint32"
    "txbmode", "", "uint8"
    "txmacaddr_rom", "", "char"
    "txmacaddr_cur", "", "char"
    "evm", "", "int8"
    "tx_chainmask", "", "uint8"
    "rx_chainmask", "", "uint8"
    "txpower", "", "uint8"
    "cf", "", "uint64"
    "last_txtsf", "", "uint32"
    "channel_mode", "", "uint16"
    "tuning_policy", "", "uint8"
    "pll_rate", "", "uint16"
    "pll_clock_select", "", "uint8"
    "pll_refdiv", "", "uint8"

txExtraInfo
>>>>>>>>>>>>>>

.. csv-table:: Variable and their meanings
    :header: "Variable", "Description", "Value type"
    :widths: 20, 40, 20

    "version", "", "uint64"
    "txchansel", "", "uint32"
    "txbmode", "", "uint8"
    "txmacaddr_rom", "", "char"
    "txmacaddr_cur", "", "char"
    "tx_chainmask", "", "uint8"
    "rx_chainmask", "", "uint8"
    "txpower", "", "uint8"
    "cf", "", "uint64"
    "sf", " ", "uint64"
    "txtsf", "", "uint32"
    "last_txtsf", "", "uint32"
    "channel_mode", "", "uint16"
    "tx_ness", "", "uint8"
    "pll_rate", "", "uint16"
    "pll_clock_select", "", "uint8"
    "pll_refdiv", "", "uint8"

channel
>>>>>>>>>>>

.. csv-table:: Variable and their meanings
    :header: "Variable", "Description", "Value type"
    :widths: 20, 40, 20

    "DeviceType", "", "double"
    "PacketFormat", "", "double"
    "CBW", "", "double"
    "CarrierFreq", "", "double"
    "SamplingRate", "", "double"
    "SubcarrierBandwidth", "", "double"
    "numTones", "", "uint16"
    "numTx", "", "uint8"
    "numRx", "", "uint8"
    "numESS", " ", "uint8"
    "ant_sel", "", "uint8"

baseband
>>>>>>>>>>>

.. csv-table:: Variable and their meanings
    :header: "Variable", "Description", "Value type"
    :widths: 20, 40, 20

    "LegacyCSI", ""
    "basebandSignals", ""
    "PreEQSymbols", ""
